<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Museum of Artificial Intelligence</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Caveat:wght@500&family=Saira:ital@0;1&family=Sour+Gummy:wdth,wght@125,300&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="./css/main.css">
  <link rel="apple-touch-icon" sizes="180x180" href="logos/favicon_io/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="logos/favicon_io/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="logos/favicon_io/favicon-16x16.png">
  <link rel="manifest" href="logos/favicon_io/site.webmanifest">
</head>

<body>
  <svg width="0" height="0" aria-hidden="true">
    <filter id="grain">
      <feTurbulence type="fractalNoise" baseFrequency="7.13"></feTurbulence>
      <feColorMatrix type="saturate" values="0"></feColorMatrix>
      <feComponentTransfer>
        <feFuncA type="linear" slope=".02"></feFuncA>
      </feComponentTransfer>
      <feBlend in2="SourceGraphic"></feBlend>
    </filter>
  </svg>

  <header>
    <h1>Museum of Artificial Intelligence</h1>
    <div class="chooser">
      <select id="directory-chooser">
        <option value="JSON_Posters/initialposters">AI History</option>
        <option value="JSON_Posters/LLMmodels">LLM Models</option>
      </select>
    </div>
      <div class="top-hover-area">
      <div class="editor-link">
        <a href="unified-editor.html" class="nav-link" style="color: #4a95ee; font-weight: 600;">✨ Unified Editor</a>
        <a href="image-editor.html" class="nav-link">Image Editor</a>
        <a href="journey-editor.html" class="nav-link">Journey Editor</a>
        <a href="v2-back-tuner.html" class="nav-link">V2 Back Tuner</a>
        <div class="rotation-speed-control">
          <label for="rotation-speed">Rotation speed per card <span id="rotation-speed-value">10s</span></label>
          <input type="range" id="rotation-speed" min="5" max="30" step="1" value="10">
        </div>
      </div>
    </div>
  </header>

  <main class="scene">
    <section class="assembly" id="posters-container">
      <!-- Posters will be dynamically inserted here -->
    </section>
  </main>

  <div class="full-article" style="display: none;">
    <div class="full-article-content">
      <button class="close-article">×</button>
      <h1 class="article-title"></h1>
      <div class="article-body">
        <p>Dummy full article content. This will be replaced with real content later.</p>
      </div>
    </div>
  </div>

  <footer></footer>

  <!-- Browser support info -->
  <aside>
    <p class="box-info-scrollani">Sorry, your browser does not appear to support scroll-driven animation. As of
      January 2025, this is supported in Firefox if the <kbd>layout.css.scroll-driven-animations.enabled</kbd> flag is
      set to true in <kbd>about:config</kbd> and in Chromium browsers. Safari support is coming, but it hasn't arrived
      yet.</p>
  </aside>

  <!-- Scripts -->
  <script src="js/lib/snarkdown.min.js"></script>
  <script src="js/loadPosters.js"></script>
  <script src="js/script.js"></script>
  <script>
    (function () {
      const channel = 'v2-back-tuner';
      const storageKey = 'v2-back-tuner';

      const applyVars = (payload) => {
        if (!payload || !payload.vars) return;
        Object.entries(payload.vars).forEach(([key, value]) => {
          document.documentElement.style.setProperty(key, value);
        });
      };

      try {
        const stored = localStorage.getItem(storageKey);
        if (stored) applyVars(JSON.parse(stored));
      } catch (err) {
        console.warn('Failed to load tuner vars', err);
      }

      window.addEventListener('storage', (event) => {
        if (event.key === storageKey && event.newValue) {
          try {
            applyVars(JSON.parse(event.newValue));
          } catch (err) {
            console.warn('Failed to parse tuner vars', err);
          }
        }
      });

      if ('BroadcastChannel' in window) {
        const channelInstance = new BroadcastChannel(channel);
        channelInstance.addEventListener('message', (event) => applyVars(event.data));
      }
    })();
  </script>
</body>

</html>
